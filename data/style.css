/* ===== Base layout ===== */
:root { --toolbar-h: 96px; }  /* toolbar height */

* { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  background: #222;
  color: #fff;
  font-family: Arial, sans-serif;
  text-align: center;
  overflow: hidden;
}

/* Map area takes all space above bottom toolbar */
#map-wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  height: calc(100vh - var(--toolbar-h));
  background: #222;
}
@supports (height: 100dvh) {
  #map-wrapper { height: calc(100dvh - var(--toolbar-h)); }
}

#map-container {
  position: relative;
  height: 100%;
  width: auto; /* JS syncs width = image rendered width */
}

#map {
  height: 100%;
  width: auto;
  display: block;
  pointer-events: none;
}

/* Marker */
.light {
  position: absolute;
  cursor: pointer;
  transition: transform 0.2s;
  transform: translate(-50%, -50%); /* center-based coordinates */
}
.traffic-icon {
  width: 6.5vh;
  height: auto;
  display: block;
}
.light:hover { transform: translate(-50%, -50%) scale(1.2); }

/* ===== Popup ===== */
#popup {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex; align-items: center; justify-content: center;
  z-index: 10;
}
#popup.hidden { display: none; }
.popup-content {
  background: #333;
  padding: 24px;
  border-radius: 14px;
  animation: fadeIn 0.25s ease;
  min-width: 320px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  position: relative;
  font-size: 18px;
}
#close { position: absolute; right: 10px; top: 8px; cursor: pointer; font-size: 24px; }
.buttons { display: flex; gap: 12px; margin-top: 16px; }
.btn {
  padding: 16px 24px; border: none; border-radius: 12px;
  font-size: 18px; cursor: pointer; transition: transform 0.15s;
}
.btn:hover { transform: scale(1.06); }
.red { background: #e74c3c; color: white; }
.yellow { background: #f1c40f; color: black; }
.green { background: #2ecc71; color: white; }

/* ===== Toolbar bottom ===== */
.toolbar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  height: var(--toolbar-h);
  display:flex; gap:16px; align-items:center; justify-content:flex-start;
  padding: 12px 16px; background:#111; border-top:1px solid #444;
  z-index: 5;
  font-size: 18px;
}
.group { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
label { font-weight:700; font-size: 18px; }
.pill { padding:6px 12px; border-radius:999px; background:#333; border:1px solid #444; }
.muted { color:#aaa; }
.hidden { display:none !important; }

.btn-sm { padding:10px 14px; font-size:16px; border-radius:8px; border:1px solid #444; background:#222; color:#fff; }
.btn-sm.active { background:#2a2a2a; }

input[type=number] {
  width:90px; background:#333; color:#fff; border:1px solid #555;
  border-radius:8px; padding:8px 10px; font-size:16px;
}
input[type=number]::-webkit-outer-spin-button,
input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
input[type=number] { -moz-appearance: textfield; }

#statusLine { margin-left:auto; display:flex; gap:14px; align-items:center; font-size: 18px; }

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.92); }
  to   { opacity: 1; transform: scale(1); }
}
